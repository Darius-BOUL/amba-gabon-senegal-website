{% extends "base.html" %}
{% load news_filters %}

{% block title %}Actualités{% endblock %}

{% block content %}
<h1 class="mb-4 text-center text-success">Actualités & Communiqués</h1>
<p class="text-muted">
    Découvrez les dernières actualités et communications de l'Ambassade du Gabon au Sénégal et des informations pratiques pour les citoyens.
</p>

{% if news_list %}
    <div class="list-group">
        {% for news in news_list %}
            <div class="list-group-item mb-4">

                {% if news.image %}
                    <img 
                        src="{{ news.image.url }}" 
                        alt="{{ news.title }}"
                        class="img-fluid rounded mb-3"
                        style="max-height: 300px; object-fit: cover; width: 100%;"
                    >
                {% endif %}

                <h5>{{ news.title }}</h5>

                <small class="text-muted">
                    Publié le {{ news.published_at|date:"d/m/Y" }}
                </small>

                <!-- Extrait propre (sans HTML cassé) -->
                <div class="mt-2 text-muted">
                    {{ news.content|unescape|striptags|truncatewords:40 }}
                </div>

                <!-- Bouton Lire la suite -->
                <a href="{% url 'news:detail' news.slug %}" class="btn btn-primary mt-3">
                    Lire la suite →
                </a>

            </div>
        {% endfor %}
    </div>
{% else %}
    <p>Aucune actualité pour le moment.</p>
{% endif %}
{% endblock %}
